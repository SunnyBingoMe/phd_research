% A simple template for LaTeX documents
% 
% To produce pdf run:
%   $ pdflatex paper.tex 
%


\documentclass[12pt]{article}

% Begin paragraphs with new line
\usepackage{parskip}  

% Change margin size
\usepackage[margin=1in]{geometry}   

% Graphics Example:  (PDF's make for good plots)
\usepackage{graphicx}               
% \centerline{\includegraphics{figure.pdf}}

% Allows hyperlinks
\usepackage{hyperref}

% Blocks of code
\usepackage{listings}
\lstset{basicstyle=\ttfamily, title=\lstname}
% Insert code like this. replace `plot.R` with file name.
% \lstinputlisting{plot.R}

% Monospaced fonts
%\usepackage{inconsolata}
% GNU \texttt{make} is a nice tool.

% Supports proof environment
\usepackage{amsthm}

% Allows writing \implies and align*
\usepackage{amsmath}

% Allows mathbb{R}
\usepackage{amsfonts}

% Numbers in scientific notation
% \usepackage{siunitx}

% Use tables generated by pandas
\usepackage{booktabs}

% Allows umlaut and non ascii characters
\usepackage[utf8]{inputenc}

% norm and infinity norm
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\inorm}[1]{\left\lVert#1\right\rVert_\infty}

% Statistics essentials
\newcommand{\iid}{\text{ iid }}
\newcommand{\Exp}{\operatorname{E}}
\newcommand{\Var}{\operatorname{Var}}
\newcommand{\Cov}{\operatorname{Cov}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\title{Project Proposal}
\date{\today}
\author{Clark Fitzgerald}
\maketitle

\begin{abstract}

\end{abstract}

\section{Statistical Calculations on GPU}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\textbf{Develop strategies and tools to use GPU's for data analysis}

\subsection{Application 1 - Approximate Likelihood}

Ethan Anderes has been working on an application with Joseph Guinness to
use Vecchia's approximation to estimate the likelihood function of $X \sim
N(0, \Sigma)$ where $X$ is of high dimension, for example 1 million. The
approximation is used because the actual pdf involves $\Sigma^{-1}$,
requiring a Cholesky decomposition which is too expensive to compute since
it requires around $n^3 / 3$ FLOPs \cite{guinness2016permutation}.  The approximation can be
posed as an embarrassingly parallel problem.

The likelihood can be written as a product of conditional likelihoods:
\[
    p_\theta(x) = p_\theta(x_1) \prod_{i = 2}^n
        p_\theta(x_i | x_1, \dots, x_{i-1})
\]
Vecchia's approximation replaces the conditioning vector $x_1, \dots,
x_{i-1}$ with a subset of this vector, say a vector with at most $k$
elements.

The general idea with maximum likelihood is to approximate the likelihood
surface for $\theta$ and choose a reasonable one. To do this we need
to evaluate possibly many $p_\theta(x)$, which is why the computation needs
to be fast.

There's a tradeoff here between statistical accuracy and runtime.
Choosing $k$ large results in more accurate approximations of $p_\theta(x)$
at the expense of runtime, which requires $O(nk^3)$ operations.

Some questions come up when running this on a GPU with $n_c$ cores:
\begin{enumerate}
    \item Is it better to write this in a blockwise manner such that we only
        evaluate $n_c$ functions? Ie. each block could use a running
        window.
    \item Should the covariance matrices be evaluated centrally or on each
        core?
\end{enumerate}

\subsection{Challenges}

This application will require understanding the computational model and
relevant programming tools for the GPU.

\subsection{Applications}

If a GPU can be used from a high level language to accelerate array
oriented computations by one or two orders of magnitude this would be very
interesting.

\section{Code Generation}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\textbf{Automatically generate R bindings for existing C and C++ libraries}

This would be an extension of Temple Lang's
work with the RCIndex \cite{R-RCIndex} and RCodeGen \cite{R-RCodegen}
packages, along with other prior work.

Writing R / C bindings by hand has several problems: 
\begin{enumerate}
    \item{Error Prone:} Computers do repetitive tasks better than humans.
    \item{Tedious:} Nobody wants to spend their time doing this.
    \item{Versioning:} A minor change in a software dependency version ie. 2.1
        to 2.2 often breaks the bindings.
\end{enumerate}

This allows one to very quickly add new
capabilities to R as a system. The new capabilities then facilitate rapid
prototyping and novel types of data analysis, using R as a `glue language'.
Temple Lang describes further applications and motivations in the paper in
the RCIndex package repository \cite{R-RCIndex}.

\subsection{Related Work}

Many packages on CRAN simply wrap existing C/C++ libraries. When done
thoughtfully this can be very useful. Ie. the programmer maps the C/C++ API
into idiomatic data structures and calls them in the new language, in this
case R.  The intent with the code generation is to \emph{augment} rather
than \emph{replace} such libraries. 

The approach in RCIndex differs from existing software like SWIG
\cite{swig} and Rcpp \cite{R-Rcpp} because it hooks directly into the clang
compiler rather than processing the text itself. This means we have a code
analysis and generation tool that will be more robust and consistent with
behavior of a compiler. 

\subsection{Challenges}

This will require me to spend significant time building expertise in C/C++.

Memory management and garbage collection is potentially difficult. A C
routine might allocate memory that R knows nothing about. Then how is that
memory protected and freed? A possible solution to this problem is to
recursively look
through the body of the code itself, which RCIndex doesn't yet do.

\subsection{Applications}

The mature C++ computer vision library openCV
\cite{opencv_library} is an example of capabilities that we would like to
access from within R. It's possible to directly write computer vision
algorithms in R, but this is a huge amount of duplicated work if a mature
library already exists.

Another application is quickly providing R bindings to cutting edge
specialized machine learning code like Professor Cho-Jui Hsieh's Hogwild++
\cite{zhang2016hogwild}.

\newpage
\bibliographystyle{plain}
\bibliography{citations} 

\end{document}
